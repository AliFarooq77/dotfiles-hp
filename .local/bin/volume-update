#!/bin/sh

# Prints the current volume or ðŸ”‡ if muted.

case $BLOCK_BUTTON in
    1) setsid -w -f "$TERMINAL" -e pamixer; pkill -RTMIN+10 "${STATUSBAR:-dwmblocks}" ;;
    2) pamixer --toggle-mute ;;
    4) pamixer --increase 1 ;;
    5) pamixer --decrease 1 ;;
    3) notify-send "ðŸ“¢ Volume module" "\- Shows volume ðŸ”Š, ðŸ”‡ if muted.
- Middle click to mute.
- Scroll to change." ;;
    6) "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

vol="$(pamixer --get-volume)"

# If muted, print ðŸ”‡ and exit.
[ "$(pamixer --get-mute)" = "true" ] && echo ðŸ”‡ && exit

# Round the volume to the nearest integer.
vol="${vol%.*}"

case 1 in
    $((vol >= 70)) ) icon="ðŸ”Š" ;;
    $((vol >= 30)) ) icon="ðŸ”‰" ;;
    $((vol >= 1)) ) icon="ðŸ”ˆ" ;;
    * ) echo ðŸ”‡ && exit ;;
esac

echo "$icon$vol%"

